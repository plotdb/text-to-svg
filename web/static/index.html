<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/ldui/ldui.min.css"><style type="text/css">html,
body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}
@font-face {
  font-family: 'pridi';
  src: url("/assets/font/pridi.ttf") format('truetype');
}
</style></head><body><div class="p-4 h-100"><div class="d-flex flex-column h-100"><div class="mb-2"><textarea class="form-control" ld="edit" rows="5"></textarea></div><div class="flex-grow-1"><svg class="w-100 h-100 border" ld="svg"></svg></div></div></div><script type="text/javascript" src="/assets/lib/ldui/ldui.min.js"></script><script type="text/javascript" src="/assets/lib/opentype.js/opentype.min.js"></script><script type="text/javascript" src="/assets/lib/tts/ol.bundle.min.js"></script><script>// Generated by LiveScript 1.3.1
var opentypeLayout, tts, svg;
opentypeLayout = require("opentype-layout");
tts = function(text, opt){
  var promise;
  opt = import$({
    fontSize: 16,
    lineHeight: 1.5,
    width: 500
  }, opt);
  promise = (tts.font || (tts.font = {}))[opt.font]
    ? Promise.resolve((tts.font || (tts.font = {}))[opt.font])
    : new Promise(function(res, rej){
      return opentype.load("/assets/font/" + opt.font + ".ttf", function(e, font){
        return res(tts.font[opt.font] = font);
      });
    });
  return promise.then(function(font){
    var scale, layout, paths, color, i$, to$, i, g, d, p, pos, that;
    scale = opt.fontSize / font.unitsPerEm;
    layout = opentypeLayout(font, text, {
      lineHeight: opt.lineHeight * font.unitsPerEm,
      width: opt.width / scale
    });
    paths = [];
    color = ['#f00', '#f90', '#ff0', '#9f0', '#0f0', '#0f9', '#0ff', '#09f', '#00f', '#90f', '#f0f', '#f09'];
    for (i$ = 0, to$ = layout.glyphs.length; i$ < to$; ++i$) {
      i = i$;
      g = layout.glyphs[i];
      d = g.data.path.toPathData();
      p = document.createElementNS("http://www.w3.org/2000/svg", "path");
      p.setAttribute('d', d);
      pos = g.position;
      p.setAttribute('transform', "scale(" + scale + ",-" + scale + ") translate(" + pos[0] + "," + pos[1] + ")");
      p.setAttribute('fill', color[i]);
      paths.push(p);
      if (that = opt.container) {
        that.appendChild(p);
      }
    }
    return paths;
  });
};
svg = ld$.find('[ld=svg]', 0);
tts("hello\nworld", {
  container: svg,
  font: 'pacifico',
  fontSize: 32,
  lineHeight: 1
}).then(function(it){
  return console.log(it);
});
function import$(obj, src){
  var own = {}.hasOwnProperty;
  for (var key in src) if (own.call(src, key)) obj[key] = src[key];
  return obj;
}</script></body></html>